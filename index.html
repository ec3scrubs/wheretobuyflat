<!DOCTYPE html>
<html>
<head>
  <title>WHERE TO BUY FLAT</title>
  
  <!-- CSS Imports -->
  <link rel="stylesheet" type="text/css" href="semantic/dist/semantic.css">
  <link rel="stylesheet" type="text/css" href="noUiSlider/nouislider.css">

  <!-- JS Imports -->
  <script src="jquery/dist/jquery.js"></script>
  <script src="semantic/dist/semantic.js"></script>
  <script src="noUiSlider/nouislider.min.js"></script>



</head>
<body>
  <!-- Navbar -->
  <div class="ui fixed menu">
    <div class="ui container">
      <div href="#" class="header item">
        <img class="logo" src="assets/images/logo.png">
      </div>
      <a href="index.html" class="item">Home</a>
      <a href="about.html" class="item">About</a>
    </div>
  </div>

  <!-- Options div -->
  <div class="ui grid" id="options">
    <div class="row" style="margin-top:20px">
      <!-- <div class="eight wide column centered center aligned"><h1>Where To Buy Flats</h1></div>       -->
    </div>

    <!-- Steps -->
<!--     <div class="row centered">
      <div class="wide column center aligned">
        <div class="ui ordered steps">
          <div class="completed step">
            <div class="content">
            <div class="title">Area</div>
              <div class="description">Choose your desired area</div>
            </div>
          </div>
          <div class="completed step">
            <div class="content">
              <div class="title">Amenities</div>
              <div class="description">Tell us what you want <br>to have in your neighbourhood</div>
            </div>
          </div>
          <div class="active step">
            <div class="content">
              <div class="title">Confirm Order</div>
              <div class="description">Verify order details</div>
            </div>
          </div>
        </div>
      </div>
    </div> -->

    <div class="row centered">
      <div class="eight wide column">
        <h4 class="ui horizontal divider header">
          <i class="marker icon"></i>
          Area
        </h4>
        <select id="towns" class="ui dropdown fluid">
          <option value="">Town</option>
        </select>
      </div>
    </div>
    
    <div class="row centered">
      <div class="eight wide column">
        <h4 class="ui horizontal divider header">
          <i class="building icon"></i>
          Amenities
        </h4>
        <select id="amenities" name="amenities" multiple="" class="ui fluid dropdown">
          <option value="">Amenities</option>
        </select>
      </div>
    </div>

    <div class="row centered">
      <div class="eight wide column center aligned">
        <h4 class="ui horizontal divider header">
          <i class="dollar icon"></i>
          Pricing
        </h4>

        <div id="price-slider"></div>
        <h4 class="grey ui header">
          <div class="header red ui" id="min-price" style="display:inline"></div> k to <div class="header blue ui" id="max-price" style="display:inline"></div> k
        </h4>
      </div>
    </div>

    <div class="row centered">
      <div class="eight wide column center aligned">
        <div class="ui buttons huge">
          <button class="ui button" onclick="resetInputs()">Reset</button>
          <button id="submitButton" class="ui positive button" onclick="submitQuery()">Submit</button>
        </div>
      </div>
    </div>
  </div> <!-- end of options div -->

  <!-- Results div -->
  <div class="ui grid" id="results">

    <div class="row" style="margin-top:20px"></div>

    <div class="row centered">
      <div class="eight wide column">
        <h4 class="ui horizontal divider header">
          <i class="list layout icon"></i>
          Results
        </h4>
        <div class="ui segment">
          <p>This is a segment for the data fetched</p>
        </div>
        <div class="ui segment">
          <p>This is a segment for the data fetched</p>
        </div>
        <div class="ui segment">
          <p>This is a segment for the data fetched</p>
        </div>
      </div>
    </div>

    <div class="row centered">
      <div class="eight wide column center aligned">
        <div class="ui buttons huge">
          <button class="ui button" onclick="backButton()">Return</button>
        </div>
      </div>
    </div>
  </div> <!-- end of results div -->

  <script type="text/javascript">
    // Init shenanigans
    $('.ui.dropdown')
    .dropdown();

    $(function() {
      $('#results').hide();  
    })

    // Functions
    function resetInputs() {
      location.reload();
    }

    function submitQuery() {
      var jqxhr = $.getJSON( "example.json", function() {
        console.log( "success" );
      })
      .done(function() {
        $('#options').hide();
        $('#results').show();
      })
      .fail(function() {
        console.log( "error" );
      })
      .always(function() {
        $('#submitButton').addClass('loading');
      })      
    }

    function backButton() {
      $('#results').hide();
      $('#options').show();
    }

    // Set up Town dropdown
    var towns = document.getElementById('towns');
    var townsList = ['Woodlands', 'Ang Mo Kio', 'Bukit Timah', 'Pasir Ris'];
    for (var i = 0; i < townsList.length; i++) {
      var option = document.createElement('option');
      option.text = townsList[i];
      option.value = townsList[i];
      towns.appendChild(option);
    }

    // Set up Amenities dropdown
    var amenities = document.getElementById('amenities');
    var amenitiesList = ['Childcare', 'Kindergarten', 'Clinic', 'Exercise', 'Family', 'Hawker Centres'];
    for (var i = 0; i < amenitiesList.length; i++) {
      var option = document.createElement('option');
      option.text = amenitiesList[i];
      option.value = amenitiesList[i];
      amenities.appendChild(option);
    }


    // Set up price slider
    var html5Slider = document.getElementById('price-slider');

    noUiSlider.create(html5Slider, {
      start: [ 10, 30 ],
      connect: true,
      range: {
        'min': 10,
        'max': 90
      }
    });

    var minPrice = document.getElementById('min-price');
    var maxPrice = document.getElementById('max-price');

    html5Slider.noUiSlider.on('update', function(values, handle) {
      var value = values[handle];
      if (handle) {
        maxPrice.innerHTML = Math.round(value);
      } else {
        minPrice.innerHTML = Math.round(value);
      }
    });

    minPrice.addEventListener('change', function(){
      html5Slider.noUiSlider.set([this.value, null]);
    });

    maxPrice.addEventListener('change', function(){
      html5Slider.noUiSlider.set([null, this.value]);
    });
  </script>
</body>
</html>